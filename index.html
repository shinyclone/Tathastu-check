<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tathastu â€“ Leisure meets Luxury</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0f0a;
    --bg2: #111811;
    --card: #141c14;
    --card2: #1a231a;
    --green: #4ade80;
    --green2: #22c55e;
    --green-dim: #16a34a;
    --text: #f0faf0;
    --text2: #a8c8a8;
    --border: #1f2f1f;
    --gold: #d4af6a;
    --danger: #f87171;
    --radius: 14px;
    --shadow: 0 8px 32px rgba(0,0,0,0.5);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€ HEADER â”€â”€ */
  header {
    background: linear-gradient(135deg, #0a0f0a 0%, #0d1f0d 50%, #0a150a 100%);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 100;
    padding: 0 1rem;
  }

  .header-inner {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 0;
    gap: 1rem;
  }

  .logo { display:flex; flex-direction:column; }

  .logo h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.6rem, 5vw, 2.4rem);
    font-weight: 900;
    background: linear-gradient(135deg, var(--green) 0%, var(--gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.1;
    letter-spacing: -0.5px;
  }

  .logo span {
    font-size: 0.72rem;
    color: var(--text2);
    letter-spacing: 3px;
    text-transform: uppercase;
    font-weight: 300;
    margin-top: 2px;
  }

  .header-actions { display:flex; align-items:center; gap:0.75rem; }

  .btn-cart {
    background: linear-gradient(135deg, var(--green2), var(--green-dim));
    color: #fff;
    border: none;
    border-radius: 50px;
    padding: 0.55rem 1.1rem;
    font-family: 'DM Sans', sans-serif;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s;
    position: relative;
  }
  .btn-cart:hover { transform: scale(1.04); }
  .btn-cart .badge {
    background: var(--gold);
    color: #111;
    border-radius: 50%;
    width: 20px; height: 20px;
    font-size: 0.7rem;
    display: flex; align-items:center; justify-content:center;
    font-weight: 700;
  }

  /* â”€â”€ HERO BANNER â”€â”€ */
  .hero {
    background: linear-gradient(135deg, #061206 0%, #0d240d 40%, #061506 100%);
    padding: 2.5rem 1rem 2rem;
    text-align: center;
    border-bottom: 1px solid var(--border);
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse 80% 60% at 50% 50%, rgba(74,222,128,0.06) 0%, transparent 70%);
    pointer-events: none;
  }
  .hero h2 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.1rem, 3.5vw, 1.5rem);
    color: var(--text2);
    font-weight: 400;
    letter-spacing: 1px;
  }
  .hero p {
    font-size: 0.85rem;
    color: #5a7a5a;
    margin-top: 0.4rem;
  }

  /* â”€â”€ CATEGORIES â”€â”€ */
  .cats-wrap {
    max-width: 1100px;
    margin: 1.5rem auto 0;
    padding: 0 1rem;
  }
  .cats {
    display: flex;
    gap: 0.6rem;
    flex-wrap: wrap;
  }
  .cat-btn {
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text2);
    padding: 0.45rem 1.1rem;
    border-radius: 50px;
    font-size: 0.82rem;
    font-family: 'DM Sans', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.3px;
  }
  .cat-btn:hover, .cat-btn.active {
    background: linear-gradient(135deg, var(--green2), var(--green-dim));
    border-color: var(--green2);
    color: #fff;
  }

  /* â”€â”€ PRODUCT GRID â”€â”€ */
  .grid-wrap {
    max-width: 1100px;
    margin: 1.5rem auto 6rem;
    padding: 0 1rem;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(165px, 1fr));
    gap: 1rem;
  }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
    display: flex;
    flex-direction: column;
  }
  .card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow);
    border-color: #2a3f2a;
  }

  .card-img {
    width: 100%;
    aspect-ratio: 4/3;
    object-fit: cover;
    background: var(--card2);
    display: block;
  }

  .card-body {
    padding: 0.75rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
  }

  .card-cat {
    font-size: 0.65rem;
    color: var(--green);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 600;
  }

  .card-name {
    font-family: 'Playfair Display', serif;
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text);
    line-height: 1.25;
  }

  .card-desc {
    font-size: 0.72rem;
    color: var(--text2);
    line-height: 1.4;
    flex: 1;
  }

  .card-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 0.6rem;
    gap: 0.4rem;
  }

  .price {
    font-size: 1rem;
    font-weight: 700;
    color: var(--gold);
  }

  .btn-add {
    background: linear-gradient(135deg, var(--green2), var(--green-dim));
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 0.38rem 0.7rem;
    font-size: 0.78rem;
    font-weight: 600;
    cursor: pointer;
    font-family: 'DM Sans', sans-serif;
    transition: all 0.15s;
    white-space: nowrap;
  }
  .btn-add:hover { filter: brightness(1.1); transform: scale(1.04); }
  .btn-add.added { background: linear-gradient(135deg, #166534, #14532d); }

  /* â”€â”€ FLOATING BUTTONS â”€â”€ */
  .float-group {
    position: fixed;
    bottom: 1.5rem;
    right: 1.2rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    z-index: 200;
  }

  .fab {
    width: 52px; height: 52px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    display: flex; align-items:center; justify-content:center;
    font-size: 1.4rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    transition: transform 0.2s;
    text-decoration: none;
    position: relative;
  }
  .fab:hover { transform: scale(1.1); }

  .fab-wa { background: #25d366; color: #fff; }
  .fab-cart {
    background: linear-gradient(135deg, var(--green2), var(--green-dim));
    color: #fff;
    font-size: 1.2rem;
  }
  .fab-badge {
    position: absolute;
    top: -4px; right: -4px;
    background: var(--gold);
    color: #111;
    border-radius: 50%;
    width: 20px; height: 20px;
    font-size: 0.68rem;
    display: flex; align-items:center; justify-content:center;
    font-weight: 700;
    font-family: 'DM Sans', sans-serif;
  }

  /* â”€â”€ CART MODAL â”€â”€ */
  .overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.75);
    z-index: 300;
    display: none;
    align-items: flex-end;
    justify-content: center;
  }
  .overlay.open { display: flex; animation: fadeIn 0.2s; }

  @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
  @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

  .modal {
    background: var(--bg2);
    border-radius: 20px 20px 0 0;
    width: 100%;
    max-width: 560px;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.3s cubic-bezier(0.34,1.2,0.64,1);
    border: 1px solid var(--border);
    border-bottom: none;
  }

  .modal-header {
    padding: 1.2rem 1.2rem 1rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .modal-header h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem;
    font-weight: 700;
  }
  .btn-close {
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text2);
    width: 32px; height: 32px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1rem;
    display: flex; align-items:center; justify-content:center;
    transition: all 0.2s;
  }
  .btn-close:hover { background: var(--card2); color: var(--text); }

  .modal-body { overflow-y: auto; flex: 1; padding: 1rem 1.2rem; }

  .empty-cart {
    text-align: center;
    padding: 2.5rem 1rem;
    color: var(--text2);
  }
  .empty-cart .emoji { font-size: 3rem; margin-bottom: 0.5rem; }

  .cart-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.8rem 0;
    border-bottom: 1px solid var(--border);
  }
  .cart-item:last-child { border-bottom: none; }

  .cart-item-info { flex: 1; min-width: 0; }
  .cart-item-name { font-weight: 600; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .cart-item-price { font-size: 0.8rem; color: var(--gold); margin-top: 2px; }

  .qty-ctrl {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .qty-btn {
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text);
    width: 28px; height: 28px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1rem;
    display: flex; align-items:center; justify-content:center;
    transition: all 0.15s;
    font-family: inherit;
  }
  .qty-btn:hover { background: var(--green-dim); border-color: var(--green-dim); }
  .qty-num { min-width: 22px; text-align:center; font-weight: 600; font-size: 0.9rem; }

  .btn-remove {
    background: none;
    border: none;
    color: var(--danger);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 4px;
    opacity: 0.7;
    transition: opacity 0.15s;
  }
  .btn-remove:hover { opacity: 1; }

  .modal-footer {
    padding: 1rem 1.2rem;
    border-top: 1px solid var(--border);
  }
  .total-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    font-size: 1rem;
  }
  .total-label { color: var(--text2); font-weight: 500; }
  .total-amount { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--gold); font-weight: 700; }

  .btn-order {
    width: 100%;
    background: linear-gradient(135deg, var(--green2), var(--green-dim));
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 0.9rem;
    font-size: 1rem;
    font-weight: 700;
    font-family: 'DM Sans', sans-serif;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.3px;
  }
  .btn-order:hover { filter: brightness(1.1); transform: translateY(-1px); }
  .btn-order:disabled { opacity:0.5; cursor:not-allowed; transform:none; }

  /* â”€â”€ ORDER FORM MODAL â”€â”€ */
  .form-modal {
    background: var(--bg2);
    border-radius: 20px 20px 0 0;
    width: 100%;
    max-width: 560px;
    max-height: 90vh;
    overflow-y: auto;
    animation: slideUp 0.3s cubic-bezier(0.34,1.2,0.64,1);
    border: 1px solid var(--border);
    border-bottom: none;
    padding: 1.5rem 1.2rem;
  }

  .form-modal h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem;
    margin-bottom: 1.2rem;
  }

  .form-group { margin-bottom: 1rem; }
  .form-group label {
    display: block;
    font-size: 0.8rem;
    color: var(--text2);
    margin-bottom: 0.4rem;
    font-weight: 500;
    letter-spacing: 0.3px;
  }
  .form-group input, .form-group textarea {
    width: 100%;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.7rem 0.9rem;
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    outline: none;
    transition: border-color 0.2s;
  }
  .form-group input:focus, .form-group textarea:focus { border-color: var(--green2); }
  .form-group textarea { height: 80px; resize: vertical; }

  .form-btns { display: flex; gap: 0.75rem; margin-top: 1.2rem; }
  .btn-back {
    flex: 0 0 auto;
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text2);
    border-radius: 12px;
    padding: 0.9rem 1.2rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-back:hover { border-color: var(--green2); color: var(--text); }

  /* â”€â”€ CONFIRMATION â”€â”€ */
  .confirm-modal {
    background: var(--bg2);
    border-radius: 20px;
    width: calc(100% - 2rem);
    max-width: 400px;
    margin: auto;
    padding: 2rem 1.5rem;
    text-align: center;
    animation: fadeIn 0.3s;
    border: 1px solid #2a3f2a;
  }
  .confirm-icon { font-size: 3.5rem; margin-bottom: 0.75rem; }
  .confirm-modal h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    color: var(--green);
    margin-bottom: 0.5rem;
  }
  .confirm-modal p { color: var(--text2); font-size: 0.9rem; line-height: 1.5; margin-bottom: 1.2rem; }
  .btn-wa {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: #25d366;
    color: #fff;
    border: none;
    border-radius: 50px;
    padding: 0.7rem 1.5rem;
    font-size: 0.9rem;
    font-weight: 700;
    font-family: 'DM Sans', sans-serif;
    text-decoration: none;
    cursor: pointer;
    transition: filter 0.2s;
  }
  .btn-wa:hover { filter: brightness(1.1); }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    text-align: center;
    padding: 1.5rem 1rem;
    color: #3a5a3a;
    font-size: 0.75rem;
    border-top: 1px solid var(--border);
  }

  /* â”€â”€ HIDDEN FIELD â”€â”€ */
  .sr-only { position:absolute; left:-9999px; }

  /* â”€â”€ RESPONSIVE â”€â”€ */
  @media (min-width: 600px) {
    .grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
    .modal, .form-modal { border-radius: 20px; }
    .overlay { align-items: center; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="logo">
      <h1>Tathastu</h1>
      <span>Leisure meets Luxury</span>
    </div>
    <div class="header-actions">
      <button class="btn-cart" onclick="openCart()">
        ğŸ›’ Cart <span class="badge" id="cartBadgeHeader">0</span>
      </button>
    </div>
  </div>
</header>

<!-- HERO -->
<div class="hero">
  <h2>Pure Veg North Indian Cuisine</h2>
  <p>Freshly prepared with love Â· Order & we'll deliver to you</p>
</div>

<!-- CATEGORY FILTERS -->
<div class="cats-wrap">
  <div class="cats" id="catButtons"></div>
</div>

<!-- PRODUCT GRID -->
<div class="grid-wrap">
  <div class="grid" id="productGrid"></div>
</div>

<!-- FLOATING BUTTONS -->
<div class="float-group">
  <a class="fab fab-wa" href="https://wa.me/919060880998" target="_blank" title="Chat on WhatsApp" aria-label="Chat on WhatsApp">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24" height="24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.127.558 4.122 1.534 5.855L0 24l6.335-1.524A11.954 11.954 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 22c-1.886 0-3.655-.49-5.197-1.347l-.372-.22-3.761.905.936-3.671-.242-.381A9.97 9.97 0 012 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"/></svg>
  </a>
  <button class="fab fab-cart" onclick="openCart()" title="View Cart" aria-label="View Cart">
    ğŸ›’
    <span class="fab-badge" id="cartBadgeFab">0</span>
  </button>
</div>

<!-- CART OVERLAY -->
<div class="overlay" id="cartOverlay" onclick="handleOverlayClick(event)">
  <div class="modal">
    <div class="modal-header">
      <h3>ğŸ›’ Your Cart</h3>
      <button class="btn-close" onclick="closeCart()">âœ•</button>
    </div>
    <div class="modal-body" id="cartBody"></div>
    <div class="modal-footer" id="cartFooter"></div>
  </div>
</div>

<!-- ORDER FORM OVERLAY -->
<div class="overlay" id="orderOverlay" onclick="handleOrderOverlayClick(event)">
  <div class="form-modal">
    <h3>ğŸ“‹ Place Your Order</h3>
    <form id="orderForm" action="https://formspree.io/f/xwvnzqkl" method="POST" onsubmit="handleSubmit(event)">
      <!-- Hidden fields for order summary -->
      <input type="hidden" name="_subject" id="emailSubject">
      <input type="hidden" name="order_summary" id="orderSummary">
      <input type="hidden" name="grand_total" id="grandTotal">

      <div class="form-group">
        <label>Customer Name *</label>
        <input type="text" name="customer_name" required placeholder="Enter your full name">
      </div>
      <div class="form-group">
        <label>Phone Number *</label>
        <input type="tel" name="phone" required placeholder="Enter your phone number">
      </div>
      <div class="form-group">
        <label>Room Number *</label>
        <input type="text" name="room_number" required placeholder="Enter your room number">
      </div>
      <div class="form-group">
        <label>Special Instructions (Optional)</label>
        <textarea name="special_instructions" placeholder="Any dietary preferences, spice level, etc."></textarea>
      </div>

      <div class="form-btns">
        <button type="button" class="btn-back" onclick="backToCart()">â† Back</button>
        <button type="submit" class="btn-order" style="flex:1">âœ… Confirm Order</button>
      </div>
    </form>
  </div>
</div>

<!-- CONFIRMATION OVERLAY -->
<div class="overlay" id="confirmOverlay">
  <div class="confirm-modal">
    <div class="confirm-icon">ğŸ‰</div>
    <h3>Order Placed!</h3>
    <p>Tathastu has received your order and will contact you on WhatsApp shortly to confirm availability and delivery.</p>
    <a class="btn-wa" href="https://wa.me/919060880998" target="_blank">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="18" height="18"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.127.558 4.122 1.534 5.855L0 24l6.335-1.524A11.954 11.954 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 22c-1.886 0-3.655-.49-5.197-1.347l-.372-.22-3.761.905.936-3.671-.242-.381A9.97 9.97 0 012 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"/></svg>
      Chat on WhatsApp
    </a>
    <button onclick="closeConfirm()" style="display:block;margin:1rem auto 0;background:none;border:none;color:var(--text2);font-size:0.85rem;cursor:pointer;font-family:'DM Sans',sans-serif;">Close</button>
  </div>
</div>

<footer>
  &copy; 2025 Tathastu Â· Leisure meets Luxury Â· ğŸ“ 9060880998
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PRODUCT DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const products = [
  // STARTERS
  {
    id: 1, name: "Mushroom Galouti", cat: "Starters",
    price: 180,
    desc: "Melt-in-mouth mushroom patties with aromatic spices.",
    img: "https://images.unsplash.com/photo-1606491956689-2ea866880c84?w=400&q=80"
  },
  {
    id: 2, name: "Paneer Tikka", cat: "Starters",
    price: 220,
    desc: "Chargrilled cottage cheese with vibrant bell peppers & chutneys.",
    img: "https://images.unsplash.com/photo-1567188040759-fb8a883dc6d8?w=400&q=80"
  },
  {
    id: 3, name: "Achari Soya Chaap", cat: "Starters",
    price: 190,
    desc: "Tender soya chaap marinated in tangy pickle-spice blend.",
    img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&q=80"
  },
  {
    id: 4, name: "Veg Seekh Kabab", cat: "Starters",
    price: 170,
    desc: "Smoky vegetable skewers packed with herbs and spice.",
    img: "https://images.unsplash.com/photo-1558030006-450675393462?w=400&q=80"
  },
  {
    id: 5, name: "Multani Mushroom Tikka", cat: "Starters",
    price: 200,
    desc: "Succulent mushrooms in Multani-style cream-spice marinade.",
    img: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400&q=80"
  },
  // DALS
  {
    id: 6, name: "Dal Tadka", cat: "Dal",
    price: 160,
    desc: "Yellow lentils tempered with cumin, garlic and dried red chilli.",
    img: "https://images.unsplash.com/photo-1547592166-23ac45744acd?w=400&q=80"
  },
  {
    id: 7, name: "Dal Fry", cat: "Dal",
    price: 160,
    desc: "Fried toor dal with onion-tomato masala and ghee drizzle.",
    img: "https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=400&q=80"
  },
  {
    id: 8, name: "Dal Makhani", cat: "Dal",
    price: 200,
    desc: "Slow-cooked black urad dal simmered in buttery tomato gravy.",
    img: "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=400&q=80"
  },
  {
    id: 9, name: "Dal Dhaba", cat: "Dal",
    price: 170,
    desc: "Rustic roadside-style mixed dal with desi ghee tempering.",
    img: "https://images.unsplash.com/photo-1562967916-eb82221dfb92?w=400&q=80"
  },
  // MAIN COURSE - VEG
  {
    id: 10, name: "Mix Veg Navratan", cat: "Main Course",
    price: 210,
    desc: "Nine mixed vegetables cooked in a rich cashew-cream gravy.",
    img: "https://images.unsplash.com/photo-1574484284002-952d92456975?w=400&q=80"
  },
  {
    id: 11, name: "Vegetable Korma", cat: "Main Course",
    price: 200,
    desc: "Soft vegetables in fragrant coconut-cashew white gravy.",
    img: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&q=80"
  },
  {
    id: 12, name: "Paneer Do Pyaza", cat: "Main Course",
    price: 250,
    desc: "Cottage cheese tossed with caramelised double onions.",
    img: "https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=400&q=80"
  },
  {
    id: 13, name: "Paneer Lababdar", cat: "Main Course",
    price: 260,
    desc: "Rich, velvety tomato-cashew gravy with soft paneer cubes.",
    img: "https://images.unsplash.com/photo-1631452180775-1b46e0c80bdf?w=400&q=80"
  },
  {
    id: 14, name: "Mushroom Masala", cat: "Main Course",
    price: 220,
    desc: "Button mushrooms sautÃ©ed in bold North Indian masala gravy.",
    img: "https://images.unsplash.com/photo-1609501676725-7186f017a4b7?w=400&q=80"
  },
  {
    id: 15, name: "Mutter Mushroom", cat: "Main Course",
    price: 210,
    desc: "Green peas and mushrooms in spiced onion-tomato base.",
    img: "https://images.unsplash.com/photo-1498837167922-ddd27525d352?w=400&q=80"
  },
  {
    id: 16, name: "Veg Jhalfrenji", cat: "Main Course",
    price: 200,
    desc: "Stir-fried mixed vegetables tossed in tangy Indo-Chinese sauce.",
    img: "https://images.unsplash.com/photo-1512058533999-ab823a53ebdb?w=400&q=80"
  },
  {
    id: 17, name: "Gobhi Masala", cat: "Main Course",
    price: 180,
    desc: "Cauliflower florets cooked in hearty North Indian masala.",
    img: "https://images.unsplash.com/photo-1606756790138-261d2b21cd75?w=400&q=80"
  },
  {
    id: 18, name: "Zeera Aloo", cat: "Main Course",
    price: 160,
    desc: "Cumin-tempered baby potatoes with coriander â€“ a simple classic.",
    img: "https://images.unsplash.com/photo-1596560548464-f010549b84d7?w=400&q=80"
  },
  {
    id: 19, name: "Paneer Butter Masala", cat: "Main Course",
    price: 270,
    desc: "Timeless paneer in rich, creamy tomato-butter gravy.",
    img: "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=400&q=80"
  },
  {
    id: 20, name: "Aloo Gobhi Adrakhi", cat: "Main Course",
    price: 170,
    desc: "Ginger-kissed potato and cauliflower dry curry.",
    img: "https://images.unsplash.com/photo-1574484284002-952d92456975?w=400&q=80"
  },
  {
    id: 21, name: "Aloo Bhaja", cat: "Main Course",
    price: 130,
    desc: "Crispy fried potato slices with mustard seeds and curry leaf.",
    img: "https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=400&q=80"
  }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CART STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let cart = JSON.parse(localStorage.getItem('tathastu_cart') || '[]');

function saveCart() {
  localStorage.setItem('tathastu_cart', JSON.stringify(cart));
  updateBadges();
}

function getTotal() {
  return cart.reduce((s, i) => s + i.price * i.qty, 0);
}

function getTotalQty() {
  return cart.reduce((s, i) => s + i.qty, 0);
}

function updateBadges() {
  const q = getTotalQty();
  document.getElementById('cartBadgeHeader').textContent = q;
  document.getElementById('cartBadgeFab').textContent = q;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let activeFilter = 'All';

function renderCategories() {
  const cats = ['All', ...new Set(products.map(p => p.cat))];
  const wrap = document.getElementById('catButtons');
  wrap.innerHTML = cats.map(c =>
    `<button class="cat-btn ${c === activeFilter ? 'active' : ''}" onclick="filterCat('${c}')">${c}</button>`
  ).join('');
}

function filterCat(cat) {
  activeFilter = cat;
  renderCategories();
  renderGrid();
}

function renderGrid() {
  const filtered = activeFilter === 'All' ? products : products.filter(p => p.cat === activeFilter);
  const grid = document.getElementById('productGrid');
  grid.innerHTML = filtered.map(p => {
    const inCart = cart.some(c => c.id === p.id);
    return `
    <div class="card">
      <img class="card-img" src="${p.img}" alt="${p.name}" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&q=80'">
      <div class="card-body">
        <span class="card-cat">${p.cat}</span>
        <div class="card-name">${p.name}</div>
        <div class="card-desc">${p.desc}</div>
        <div class="card-footer">
          <span class="price">â‚¹${p.price}</span>
          <button class="btn-add ${inCart ? 'added' : ''}" onclick="addToCart(${p.id}, this)">
            ${inCart ? 'âœ“ Added' : '+ Add'}
          </button>
        </div>
      </div>
    </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CART ACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addToCart(id, btn) {
  const p = products.find(x => x.id === id);
  const existing = cart.find(c => c.id === id);
  if (existing) {
    existing.qty++;
  } else {
    cart.push({ id: p.id, name: p.name, price: p.price, qty: 1 });
  }
  saveCart();
  btn.textContent = 'âœ“ Added';
  btn.classList.add('added');
}

function updateQty(id, delta) {
  const item = cart.find(c => c.id === id);
  if (!item) return;
  item.qty += delta;
  if (item.qty <= 0) cart = cart.filter(c => c.id !== id);
  saveCart();
  renderCart();
  // sync add buttons
  renderGrid();
}

function removeItem(id) {
  cart = cart.filter(c => c.id !== id);
  saveCart();
  renderCart();
  renderGrid();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CART MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCart() {
  const body = document.getElementById('cartBody');
  const footer = document.getElementById('cartFooter');

  if (cart.length === 0) {
    body.innerHTML = `<div class="empty-cart"><div class="emoji">ğŸ½ï¸</div><p>Your cart is empty</p><p style="font-size:0.8rem;margin-top:0.3rem;">Add some delicious items!</p></div>`;
    footer.innerHTML = '';
    return;
  }

  body.innerHTML = cart.map(item => `
    <div class="cart-item">
      <div class="cart-item-info">
        <div class="cart-item-name">${item.name}</div>
        <div class="cart-item-price">â‚¹${item.price} Ã— ${item.qty} = <strong>â‚¹${item.price * item.qty}</strong></div>
      </div>
      <div class="qty-ctrl">
        <button class="qty-btn" onclick="updateQty(${item.id}, -1)">âˆ’</button>
        <span class="qty-num">${item.qty}</span>
        <button class="qty-btn" onclick="updateQty(${item.id}, 1)">+</button>
      </div>
      <button class="btn-remove" onclick="removeItem(${item.id})" title="Remove">ğŸ—‘</button>
    </div>
  `).join('');

  footer.innerHTML = `
    <div class="total-row">
      <span class="total-label">Grand Total</span>
      <span class="total-amount">â‚¹${getTotal()}</span>
    </div>
    <button class="btn-order" onclick="openOrderForm()">ğŸ“‹ Place Order â†’</button>
  `;
}

function openCart() {
  renderCart();
  document.getElementById('cartOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeCart() {
  document.getElementById('cartOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

function handleOverlayClick(e) {
  if (e.target === e.currentTarget) closeCart();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ORDER FORM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openOrderForm() {
  if (cart.length === 0) return;

  // Populate hidden fields
  const summary = cart.map(i => `${i.name} x${i.qty} = â‚¹${i.price * i.qty}`).join('\n');
  const fullSummary = `ORDER DETAILS:\n${'â”€'.repeat(30)}\n${summary}\n${'â”€'.repeat(30)}\nGRAND TOTAL: â‚¹${getTotal()}`;

  document.getElementById('orderSummary').value = fullSummary;
  document.getElementById('grandTotal').value = `â‚¹${getTotal()}`;
  document.getElementById('emailSubject').value = `New Order â€“ Tathastu (â‚¹${getTotal()})`;

  closeCart();
  document.getElementById('orderOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function backToCart() {
  document.getElementById('orderOverlay').classList.remove('open');
  openCart();
}

function handleOrderOverlayClick(e) {
  if (e.target === e.currentTarget) {
    document.getElementById('orderOverlay').classList.remove('open');
    document.body.style.overflow = '';
  }
}

function handleSubmit(e) {
  e.preventDefault();
  const form = document.getElementById('orderForm');
  const btn = form.querySelector('button[type="submit"]');
  btn.disabled = true;
  btn.textContent = 'Sendingâ€¦';

  // Build JSON payload â€” avoids CORS preflight issues on mobile browsers
  const fd = new FormData(form);
  const payload = {};
  fd.forEach((val, key) => { payload[key] = val; });

  fetch('https://formspree.io/f/xwvnzqkl', {
    method: 'POST',
    body: JSON.stringify(payload),
    headers: {
      'Content-Type': 'application/json',
      'Accept': 'application/json'
    }
  }).then(res => res.json().then(data => ({ ok: res.ok, data })))
  .then(({ ok, data }) => {
    btn.disabled = false;
    btn.textContent = 'âœ… Confirm Order';
    if (ok) {
      document.getElementById('orderOverlay').classList.remove('open');
      cart = [];
      saveCart();
      renderGrid();
      form.reset();
      document.getElementById('confirmOverlay').classList.add('open');
    } else {
      const msg = (data && data.error) ? data.error : 'Submission failed. Please try again.';
      alert('âš ï¸ ' + msg + '\n\nOr call us directly: 9060880998');
    }
  }).catch(err => {
    btn.disabled = false;
    btn.textContent = 'âœ… Confirm Order';
    console.error('Order error:', err);
    alert('âš ï¸ Could not send order. Please check your internet and try again.\n\nOr call/WhatsApp: 9060880998');
  });
}

function closeConfirm() {
  document.getElementById('confirmOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderCategories();
renderGrid();
updateBadges();
</script>
</body>
</html>
